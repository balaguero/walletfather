"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[381],{6381:(j,d,n)=>{n.r(d),n.d(d,{DashboardModule:()=>O});var c=n(8583),f=n(4655),s=n(3679),Z=n(3548);class v{constructor(o,e,i,l){this.email=o,this.wallet=e,this.createdAt=i,this.updatedAt=l}}var _=n(4913),r=n(3815),t=n(7716),x=n(9164),g=n(9224),m=n(7423),u=n(773),w=n(7093),h=n(7249),p=n(3374),T=n(2950);function A(a,o){1&a&&(t.TgZ(0,"span"),t._uU(1,"Show"),t.qZA())}function W(a,o){1&a&&(t.TgZ(0,"span"),t._uU(1,"Hide"),t.qZA())}function b(a,o){1&a&&(t.TgZ(0,"span"),t._uU(1,"********"),t.qZA())}function F(a,o){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.userProfile.wallet.privateKey)}}function y(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div"),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"span"),t._uU(6,"PrivateKey: "),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().togglePrivateKey()}),t.YNc(8,A,2,0,"span",3),t.YNc(9,W,2,0,"span",3),t.qZA(),t.YNc(10,b,2,0,"span",3),t.YNc(11,F,2,1,"span",3),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.hij("Address: ",e.userProfile.wallet.address,""),t.xp6(5),t.Q6J("ngIf",!e.showPrivateKey),t.xp6(1),t.Q6J("ngIf",e.showPrivateKey),t.xp6(1),t.Q6J("ngIf",!e.showPrivateKey),t.xp6(1),t.Q6J("ngIf",e.showPrivateKey)}}function C(a,o){1&a&&t._UZ(0,"mat-spinner")}function P(a,o){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(2),t.hij("Name: ",e.walletFather.name,""),t.xp6(2),t.hij("Id: ",e.walletFather.id,""),t.xp6(2),t.hij("Owner: ",e.walletFather.owner,"")}}function D(a,o){if(1&a&&(t.TgZ(0,"div",7),t._UZ(1,"img",8),t.YNc(2,P,7,3,"div",3),t.qZA()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.walletFather)}}const N=function(){return{standalone:!0}};function U(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"h4"),t._uU(2,"Welcome, start creating a walletFather"),t.qZA(),t.TgZ(3,"mat-form-field",9),t.TgZ(4,"mat-label"),t._uU(5,"Pick a name"),t.qZA(),t.TgZ(6,"input",10),t.NdJ("ngModelChange",function(l){return t.CHM(e),t.oxw().newWalletFatherName=l}),t.qZA(),t.qZA(),t.TgZ(7,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().createWalletFather()}),t._uU(8," Create "),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.newWalletFatherName)("ngModelOptions",t.DdM(2,N))}}function L(a,o){1&a&&(t.TgZ(0,"mat-spinner"),t._uU(1," Wait 30s "),t.qZA())}function I(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).createWallet()}),t._uU(2," Create Wallet "),t.qZA(),t._UZ(3,"app-wallet-list",13),t.qZA()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("wallets",e.wallets)}}function M(a,o){1&a&&(t.TgZ(0,"mat-spinner"),t._uU(1," Wait 30s "),t.qZA())}function J(a,o){if(1&a&&(t.TgZ(0,"mat-card"),t.TgZ(1,"h3"),t._uU(2),t.qZA(),t.YNc(3,I,4,1,"div",3),t.YNc(4,M,2,0,"mat-spinner",3),t.qZA()),2&a){const e=t.oxw();t.xp6(2),t.hij("Your Wallets (",e.wallets.length,")"),t.xp6(1),t.Q6J("ngIf",!e.isWalletLoading),t.xp6(1),t.Q6J("ngIf",e.isWalletLoading)}}let q=(()=>{class a{constructor(e){this._serviceBase=e,this.showPrivateKey=!1,this.newWalletFatherName="Sonny",this.isProfileLoading=!0,this.isWalletFatherLoading=!0,this.isWalletLoading=!0,this.wallets=[]}ngOnInit(){this.getMyProfile().then(()=>{this.getMyWalletFather(),this.getWalletList()})}togglePrivateKey(){this.showPrivateKey=!this.showPrivateKey}createWalletFather(){this.isWalletFatherLoading=!0,this._serviceBase.httpPost("wallet-father/create",{name:this.newWalletFatherName}).toPromise().then(()=>new Promise(e=>setTimeout(e,3e4))).finally(()=>this.getMyWalletFather())}createWallet(){this.isWalletLoading=!0,this._serviceBase.httpPost("wallet/create",{}).toPromise().then(()=>new Promise(e=>setTimeout(e,3e4))).finally(()=>this.getWalletList())}getMyProfile(){return this.isProfileLoading=!0,this._serviceBase.httpGet("user/my-profile").toPromise().then(e=>{this.userProfile=r.assignIn(new v,e)}).finally(()=>{this.isProfileLoading=!1})}getMyWalletFather(){this.isWalletFatherLoading=!0,this._serviceBase.httpGet(`wallet-father/get-by-owner?owner=${this.userProfile.wallet}`).toPromise().then(e=>{e&&e[0]&&(this.walletFather=r.assignIn(new Z.N,e[0]))}).finally(()=>{this.isWalletFatherLoading=!1})}getWalletList(){this.isWalletLoading=!0,this._serviceBase.httpGet("wallet/list").toPromise().then(e=>{e&&(this.wallets=r.map(e,i=>r.assignIn(new _.w,i)))}).finally(()=>{this.isWalletLoading=!1})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(x.n))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard"]],decls:22,vars:6,consts:[[1,"container"],[1,"about","mb-12"],[1,"wallet","mb-12"],[4,"ngIf"],[1,"walletFather","mb-12"],["class","walletFather-container","fxLayout","row",4,"ngIf"],["mat-button","","mat-stroked-button","",3,"click"],["fxLayout","row",1,"walletFather-container"],["alt","Walletfather Logo","src","assets/logo.png",1,"mr-24"],["appearance","outline"],["matInput","",3,"ngModel","ngModelOptions","ngModelChange"],["mat-raised-button","","mat-button","",3,"click"],["mat-button","","mat-raised-button","",3,"click"],[3,"wallets"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Dashboard"),t.qZA(),t.TgZ(3,"mat-card",1),t.TgZ(4,"h3"),t._uU(5,"About dashboard:"),t.qZA(),t.TgZ(6,"p"),t._uU(7,"Dashboard data is loaded by hitting the API using auth token. This is intended since this dashboard version aims to interact with the express API, by creating walletFathers and wallets."),t.qZA(),t.TgZ(8,"p"),t._uU(9,"The way we are getting the data is trough private key validation, not trough web3."),t.qZA(),t.qZA(),t.TgZ(10,"mat-card",2),t.TgZ(11,"h3"),t._uU(12,"Your main wallet"),t.qZA(),t.YNc(13,y,12,5,"div",3),t.YNc(14,C,1,0,"mat-spinner",3),t.qZA(),t.TgZ(15,"mat-card",4),t.TgZ(16,"h3"),t._uU(17,"Your WalletFather"),t.qZA(),t.YNc(18,D,3,1,"div",5),t.YNc(19,U,9,3,"div",3),t.YNc(20,L,2,0,"mat-spinner",3),t.qZA(),t.YNc(21,J,5,3,"mat-card",3),t.qZA()),2&e&&(t.xp6(13),t.Q6J("ngIf",!i.isProfileLoading),t.xp6(1),t.Q6J("ngIf",i.isProfileLoading),t.xp6(4),t.Q6J("ngIf",!i.isWalletFatherLoading&&i.walletFather),t.xp6(1),t.Q6J("ngIf",!i.isWalletFatherLoading&&!i.walletFather),t.xp6(1),t.Q6J("ngIf",i.isWalletFatherLoading),t.xp6(1),t.Q6J("ngIf",!i.isWalletFatherLoading))},directives:[g.a8,c.O5,m.lW,u.$g,w.xw,h.KE,h.hX,p.Nt,s.Fj,s.JJ,s.On,T.N],styles:[".walletFather-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80px}"]}),a})();var Y=n(1550),Q=n(4944);const K=[{path:"",component:q,children:[]}];let O=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[c.ez,s.u5,g.QW,f.Bz.forChild(K),Q.o9,m.ot,p.c,h.lN,u.Cq,Y.t]]}),a})()}}]);